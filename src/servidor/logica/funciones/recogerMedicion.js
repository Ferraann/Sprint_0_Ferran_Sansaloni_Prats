// -*- javascript -*-

// --------------------------------------------------------------------------------
// recogerMedicion
// --------------------------------------------------------------------------------

// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------


// -----------------------------------------------------------------------------
// datos:{id_sensor:Int}
// //      -->
// //          recogerMedicion() --> [ { id_medicion, id_sensor, latitud, longitud, timestamp, medicionCo2, temperatura, humedad } ]
// -----------------------------------------------------------------------------
module.exports = async function recogerMedicion(datos) {

    let textoSQL = "SELECT * FROM mediciones";
    let valoresParaSQL = {};

    if (datos && datos.id_sensor) {
        textoSQL += " WHERE id_sensor = $id_sensor";
        valoresParaSQL.$id_sensor = datos.id_sensor;
    }

    return new Promise((resolver, rechazar) => {
        recogerMedicion.conexion.all(textoSQL, valoresParaSQL, function(err, filas) {
            (err ? rechazar(err) : resolver(filas));
        });
    });

} // ()

// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
